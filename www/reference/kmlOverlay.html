<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create and write KML file for PNG image overlay — kmlOverlay • maptools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create and write KML file for PNG image overlay — kmlOverlay" />
<meta property="og:description" content="The function is used to create and write a KML file for a PNG image overlay for Google Earth." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">maptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create and write KML file for PNG image overlay</h1>
    
    <div class="hidden name"><code>kmlOverlay.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function is used to create and write a KML file for a PNG image overlay for Google Earth.</p>
    </div>

    <pre class="usage"><span class='fu'>kmlOverlay</span><span class='op'>(</span><span class='va'>obj</span>, kmlfile <span class='op'>=</span> <span class='cn'>NULL</span>, imagefile <span class='op'>=</span> <span class='cn'>NULL</span>, name <span class='op'>=</span> <span class='st'>"R image"</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>a <code>GE_SG</code> object from <code>GE_SpatialGrid</code></p></td>
    </tr>
    <tr>
      <th>kmlfile</th>
      <td><p>if not NULL the name of the kml file to be written</p></td>
    </tr>
    <tr>
      <th>imagefile</th>
      <td><p>the name of the PNG file containing the image - this should be either relative (same directory as kml file) or abosolute (fully qualified)</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>the name used to describe the image overlay in GE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function is used together with <code>GE_SpatialGrid</code> to wrap around the opening of a PNG graphics device, plotting code, and the closing of the device. The computed values take account of the adjustment of the actual data bounding box to an integer number of rows and columns in the image file.</p>
<p>The approach may be used as an alternative to writing PNG files from SpatialGrid and SpatialPixel objects in <span class="pkg">rgdal</span> using <code>writeGDAL</code>, and to writing KML files using <code>writeOGR</code> for vector data objects. The output PNG files are likely to be very much smaller than large vector data KML files, and hinder the retrieval of exact positional information.</p>
<p>Note that the geometries should be in geographical coordinates with datum WGS84.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>x is a character vector containing the generated lines of the kml file</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Duncan Golicher, David Forrest and Roger Bivand</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='GE_SpatialGrid.html'>GE_SpatialGrid</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>opt_exask</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span>example.ask<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>qk</span> <span class='op'>&lt;-</span> <span class='fu'>SpatialPointsDataFrame</span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span>, <span class='va'>quakes</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/raster/man/projection.html'>proj4string</a></span><span class='op'>(</span><span class='va'>qk</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+proj=longlat +ellps=WGS84"</span><span class='op'>)</span>
<span class='va'>tf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>SGqk</span> <span class='op'>&lt;-</span> <span class='fu'><a href='GE_SpatialGrid.html'>GE_SpatialGrid</a></span><span class='op'>(</span><span class='va'>qk</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: CRS object has comment, which is lost in output</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/grDevices/png.html'>png</a></span><span class='op'>(</span>file<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>tf</span>, <span class='st'>".png"</span>, sep<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span>, width<span class='op'>=</span><span class='va'>SGqk</span><span class='op'>$</span><span class='va'>width</span>, height<span class='op'>=</span><span class='va'>SGqk</span><span class='op'>$</span><span class='va'>height</span>,
  bg<span class='op'>=</span><span class='st'>"transparent"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>, xaxs<span class='op'>=</span><span class='st'>"i"</span>, yaxs<span class='op'>=</span><span class='st'>"i"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>qk</span>, xlim<span class='op'>=</span><span class='va'>SGqk</span><span class='op'>$</span><span class='va'>xlim</span>, ylim<span class='op'>=</span><span class='va'>SGqk</span><span class='op'>$</span><span class='va'>ylim</span>, setParUsrBB<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/grDevices/dev.html'>dev.off</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; agg_png 
#&gt;       2 </div><div class='input'><span class='fu'>kmlOverlay</span><span class='op'>(</span><span class='va'>SGqk</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>tf</span>, <span class='st'>".kml"</span>, sep<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>tf</span>, <span class='st'>".png"</span>, sep<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: CRS object has comment, which is lost in output</span></div><div class='output co'>#&gt; [1] "&lt;?xml version='1.0' encoding='UTF-8'?&gt;"                                                                           
#&gt; [2] "&lt;kml xmlns='http://earth.google.com/kml/2.0'&gt;"                                                                    
#&gt; [3] "&lt;GroundOverlay&gt;"                                                                                                  
#&gt; [4] "&lt;name&gt;R image&lt;/name&gt;"                                                                                             
#&gt; [5] "&lt;Icon&gt;&lt;href&gt;/tmp/Rtmpe6erim/file28a0a28364ef8.png&lt;/href&gt;&lt;viewBoundScale&gt;0.75&lt;/viewBoundScale&gt;&lt;/Icon&gt;"             
#&gt; [6] "&lt;LatLonBox&gt;&lt;north&gt;-10.72&lt;/north&gt;&lt;south&gt;-38.59&lt;/south&gt;&lt;east&gt;188.158103454744&lt;/east&gt;&lt;west&gt;165.67&lt;/west&gt;&lt;/LatLonBox&gt;"
#&gt; [7] "&lt;/GroundOverlay&gt;&lt;/kml&gt;"                                                                                           </div><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>#library(rgdal)</span>
<span class='co'>#qk0 &lt;- quakes</span>
<span class='co'>#qk0$long &lt;- ifelse(qk0$long &lt;= 180, qk0$long, qk0$long-360)</span>
<span class='co'>#qk0a &lt;- SpatialPointsDataFrame(qk0[, c(2:1)], qk0)</span>
<span class='co'>#proj4string(qk0a) &lt;- CRS("+proj=longlat +ellps=WGS84")</span>
<span class='co'>#writeOGR(qk0a, paste(tf, "v.kml", sep=""), "Quakes", "KML")</span>
<span class='co'>#system(paste("googleearth ", tf, ".kml", sep=""))</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span>example.ask<span class='op'>=</span><span class='va'>opt_exask</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Roger Bivand, Nicholas Lewin-Koh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


