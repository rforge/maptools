<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Conditioned choropleth maps — CCmaps • maptools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Conditioned choropleth maps — CCmaps" />
<meta property="og:description" content="Conditioned choropleth maps permit the conditioning of a map of a variable on the values of one or two other variables coded as factors or shingles. This function uses spplot after constructing multiple subsets of the variable of interest defined by the intervals given by the conditioning variables." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">maptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Conditioned choropleth maps</h1>
    
    <div class="hidden name"><code>CCmaps.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Conditioned choropleth maps permit the conditioning of a map of a variable on the values of one or two other variables coded as factors or shingles. This function uses <a href='https://rdrr.io/pkg/sp/man/spplot.html'>spplot</a> after constructing multiple subsets of the variable of interest defined by the intervals given by the conditioning variables.</p>
    </div>

    <pre class="usage"><span class='fu'>CCmaps</span><span class='op'>(</span><span class='va'>obj</span>, zcol <span class='op'>=</span> <span class='cn'>NULL</span>, cvar <span class='op'>=</span> <span class='cn'>NULL</span>, cvar.names <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span>, <span class='va'>names.attr</span>,
 scales <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>draw <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>, xlab <span class='op'>=</span> <span class='cn'>NULL</span>, ylab <span class='op'>=</span> <span class='cn'>NULL</span>,
 aspect <span class='op'>=</span> <span class='fu'>mapasp</span><span class='op'>(</span><span class='va'>obj</span>, <span class='va'>xlim</span>, <span class='va'>ylim</span><span class='op'>)</span>, sp.layout <span class='op'>=</span> <span class='cn'>NULL</span>, xlim <span class='op'>=</span> <span class='fu'>bbox</span><span class='op'>(</span><span class='va'>obj</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>,
 ylim <span class='op'>=</span> <span class='fu'>bbox</span><span class='op'>(</span><span class='va'>obj</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>2</span>, <span class='op'>]</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>object of class <a href='https://rdrr.io/pkg/sp/man/SpatialPolygons.html'>SpatialPolygonsDataFrame</a></p></td>
    </tr>
    <tr>
      <th>zcol</th>
      <td><p>single variable name as string</p></td>
    </tr>
    <tr>
      <th>cvar</th>
      <td><p>a list of one or two conditioning variables, which should be of class factor or shingle</p></td>
    </tr>
    <tr>
      <th>cvar.names</th>
      <td><p>names for conditioning variables, if not given, the names of the variables in the <code>cvar</code> list</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments passed to <a href='https://rdrr.io/pkg/sp/man/spplot.html'>spplot</a> and <a href='https://rdrr.io/pkg/lattice/man/levelplot.html'>levelplot</a></p></td>
    </tr>
    <tr>
      <th>names.attr</th>
      <td><p>names to use in panel, if different from zcol names</p></td>
    </tr>
    <tr>
      <th>scales</th>
      <td><p>scales argument to be passed to Lattice plots; use
<code><a href='https://rdrr.io/r/base/list.html'>list(draw = TRUE)</a></code> to draw axes scales</p></td>
    </tr>
    <tr>
      <th>xlab</th>
      <td><p>label for x-axis</p></td>
    </tr>
    <tr>
      <th>ylab</th>
      <td><p>label for y-axis</p></td>
    </tr>
    <tr>
      <th>aspect</th>
      <td><p>aspect ratio for spatial axes; defaults to "iso" (one unit
on the x-axis equals one unit on the y-axis) but may be set to more
suitable values if the data are e.g. if coordinates are latitude/longitude</p></td>
    </tr>
    <tr>
      <th>sp.layout</th>
      <td><p>NULL or list; see <a href='https://rdrr.io/pkg/sp/man/spplot.html'>spplot</a></p></td>
    </tr>
    <tr>
      <th>xlim</th>
      <td><p>numeric; x-axis limits</p></td>
    </tr>
    <tr>
      <th>ylim</th>
      <td><p>numeric; y-axis limits</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a <a href='https://rdrr.io/pkg/sp/man/SpatialPolygons.html'>SpatialPolygonsDataFrame</a> object with the <code>zcol</code> variable and the partitions of the <code>cvars</code> list variables invisibly.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Carr D, Wallin J, Carr D (2000) Two new templates for epidemiology applications: linked micromap plots and conditioned choropleth maps. <em>Statistics in Medicine</em> 19(17-18): 2521-2538
Carr D, White D, MacEachren A (2005) Conditioned choropleth maps and hypothesis generation. <em>Annals of the Association of American Geographers</em> 95(1): 32-53
Friendly M (2007) A.-M. Guerry's Moral Statistics of France: challenges for multivariable spatial analysis. <em>Statistical Science</em> 22(3): 368-399</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Roger Bivand</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/sp/man/spplot.html'>spplot</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>nc.sids</span> <span class='op'>&lt;-</span> <span class='fu'><a href='readShapeSpatial.html'>readShapeSpatial</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shapes/sids.shp"</span>,
 package<span class='op'>=</span><span class='st'>"maptools"</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, IDvar<span class='op'>=</span><span class='st'>"FIPSNO"</span>,
 proj4string<span class='op'>=</span><span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+proj=longlat +ellps=clrk66"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: readShapeSpatial is deprecated; use rgdal::readOGR or sf::st_read</span></div><div class='output co'>#&gt; <span class='warning'>Warning: readShapePoly is deprecated; use rgdal::readOGR or sf::st_read</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum Unknown based on Clarke 1866 ellipsoid in Proj4 definition</span></div><div class='input'><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>ft.SID74</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>1000</span><span class='op'>)</span><span class='op'>*</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>SID74</span><span class='op'>/</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>BIR74</span><span class='op'>)</span> <span class='op'>+</span>
 <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>SID74</span><span class='op'>+</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>/</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>BIR74</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>ft.NWBIR74</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>1000</span><span class='op'>)</span><span class='op'>*</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>NWBIR74</span><span class='op'>/</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>BIR74</span><span class='op'>)</span> <span class='op'>+</span>
 <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>(</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>NWBIR74</span><span class='op'>+</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>/</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>BIR74</span><span class='op'>)</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://lattice.r-forge.r-project.org/'>lattice</a></span><span class='op'>)</span>
<span class='va'>sh_nw4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/lattice/man/shingles.html'>equal.count</a></span><span class='op'>(</span><span class='va'>nc.sids</span><span class='op'>$</span><span class='va'>ft.NWBIR74</span>, number<span class='op'>=</span><span class='fl'>4</span>, overlap<span class='op'>=</span><span class='fl'>1</span><span class='op'>/</span><span class='fl'>5</span><span class='op'>)</span>
<span class='fu'>CCmaps</span><span class='op'>(</span><span class='va'>nc.sids</span>, <span class='st'>"ft.SID74"</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"Nonwhite_births"</span><span class='op'>=</span><span class='va'>sh_nw4</span><span class='op'>)</span>,
 col.regions<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/grDevices/colorRamp.html'>colorRampPalette</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"yellow1"</span>, <span class='st'>"brown3"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span>,
 main<span class='op'>=</span><span class='st'>"Transformed SIDS rates 1974-8"</span><span class='op'>)</span>
</div><div class='img'><img src='CCmaps-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Roger Bivand, Nicholas Lewin-Koh.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


